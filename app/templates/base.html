<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="í•œêµ­ ë¼ë””ì˜¤ ì„ ê³¡í‘œë¥¼ Spotify í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜í•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜">
    <title>{% block title %}ë¼ë””ì˜¤ í”Œë¦¬{% endblock %}</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-left">
                <a href="/" class="navbar-logo">ğŸµ ë¼ë””ì˜¤ í”Œë¦¬</a>
            </div>
            <div class="navbar-right">
                {% if session.get('user_id') and user %}
                    <a href="/dashboard" class="navbar-link">ëŒ€ì‹œë³´ë“œ</a>
                    <a href="/admin" class="navbar-link">ê´€ë¦¬</a>
                    <span class="navbar-user">{{ user.display_name }}</span>
                    <a href="/auth/logout" class="navbar-logout">ë¡œê·¸ì•„ì›ƒ</a>
                {% else %}
                    <a href="/auth/spotify" class="navbar-login">Spotifyë¡œ ë¡œê·¸ì¸</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 ë¼ë””ì˜¤ í”Œë¦¬. All rights reserved.</p>
            <p>í•œêµ­ ë¼ë””ì˜¤ ì• í˜¸ê°€ë“¤ì„ ìœ„í•œ Spotify í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ìë™ ìƒì„± ì„œë¹„ìŠ¤</p>
        </div>
    </footer>

    <!-- Toast Notification Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- JavaScript Utilities -->
    <script>
        function showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.innerHTML = `
                <div class="toast-content">
                    <span class="toast-icon">${type === 'success' ? 'âœ“' : type === 'error' ? 'âœ•' : 'â„¹'}</span>
                    <span class="toast-message">${message}</span>
                </div>
                <button class="toast-close" onclick="this.parentElement.remove()">Ã—</button>
            `;
            container.appendChild(toast);
            setTimeout(() => { if (toast.parentElement) toast.remove(); }, 4000);
        }

        async function fetchAPI(url, options = {}) {
            try {
                const response = await fetch(url, {
                    headers: { 'Content-Type': 'application/json', ...options.headers },
                    ...options
                });
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.error || `HTTP ${response.status}`);
                }
                return await response.json();
            } catch (error) {
                showToast(error.message || 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
                throw error;
            }
        }

        function formatDateKorean(dateString) {
            const date = new Date(dateString);
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}ë…„ ${month}ì›” ${day}ì¼`;
        }
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>
